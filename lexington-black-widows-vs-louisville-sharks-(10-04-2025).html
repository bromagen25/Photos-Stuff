<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lexington Black Widows vs Louisville Sharks (10-04-2025) Photo Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom styles for smooth transitions and font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000; /* Black background */
            color: #FF0000; /* Red text */
        }
        .gallery-image {
            transition: transform 0.2s ease-in-out;
        }
        .gallery-image:hover {
            transform: scale(1.05);
            cursor: pointer;
        }
        .modal {
            background-color: rgba(0, 0, 0, 0.95);
            transition: opacity 0.3s ease-in-out;
            z-index: 1000; /* Ensure modal is on top */
        }
        .modal-content {
            max-height: 90vh;
            max-width: 90vw;
            object-fit: contain;
            cursor: pointer; /* Indicate that the modal image is now clickable */
        }
        .nav-button {
            transition: background-color 0.1s;
        }
        .nav-button.active {
            background-color: #FF0000; /* Red active background */
            color: #000000; /* Black active text */
            font-weight: bold;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <header class="w-full max-w-4xl text-center mb-8">
        <a href="index.html" class="text-red-500 hover:text-red-700 text-sm flex items-center justify-center mb-4">
            <i class="fas fa-arrow-left mr-2"></i> Back to Galleries
        </a>
        <h1 class="text-3xl sm:text-4xl font-extrabold text-red-600 mb-2">
            Lexington Black Widows vs Louisville Sharks
        </h1>
        <p class="text-xl text-red-400 font-medium">(October 4, 2025) Photo Gallery</p>
    </header>

    <!-- Navigation Tabs -->
    <nav class="w-full max-w-5xl overflow-x-auto whitespace-nowrap mb-8 pb-3 -mx-4 sm:mx-0">
        <div class="flex space-x-2 sm:space-x-4 justify-center">
            <!-- Gallery Tabs -->
            <button data-gallery="1st Half" class="nav-button px-4 py-2 text-sm sm:text-base rounded-full bg-gray-800 text-red-500 hover:bg-red-900 hover:text-white active:bg-red-600">
                1st Half
            </button>
            <button data-gallery="2nd Half" class="nav-button px-4 py-2 text-sm sm:text-base rounded-full bg-gray-800 text-red-500 hover:bg-red-900 hover:text-white">
                2nd Half
            </button>
            <button data-gallery="3rd Half" class="nav-button px-4 py-2 text-sm sm:text-base rounded-full bg-gray-800 text-red-500 hover:bg-red-900 hover:text-white">
                3rd Half
            </button>
            <button data-gallery="Warmups - Team" class="nav-button px-4 py-2 text-sm sm:text-base rounded-full bg-gray-800 text-red-500 hover:bg-red-900 hover:text-white">
                Warmups - Team
            </button>
            <button data-gallery="Team Photos" class="nav-button px-4 py-2 text-sm sm:text-base rounded-full bg-gray-800 text-red-500 hover:bg-red-900 hover:text-white">
                Team Photos
            </button>
            <!-- Videos Link Button -->
            <a href="videos.html" class="px-4 py-2 text-sm sm:text-base rounded-full bg-red-600 text-white font-bold hover:bg-red-700 transition duration-150 flex items-center">
                <i class="fas fa-video mr-1 sm:mr-2"></i> Videos
            </a>
        </div>
    </nav>

    <!-- Gallery Container -->
    <div id="gallery-container" class="w-full max-w-5xl grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
        <!-- Images will be injected here -->
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="mt-12 text-center hidden">
        <i class="fas fa-spinner fa-spin text-4xl text-red-600"></i>
        <p class="mt-2 text-red-500">Loading photos...</p>
    </div>

    <!-- Error Message -->
    <div id="error-message" class="mt-12 text-center hidden p-4 bg-red-900/50 rounded-lg max-w-md">
        <p class="text-red-400 font-semibold">Error: Could not load gallery content.</p>
    </div>

    <!-- Image Modal -->
    <div id="image-modal" class="modal fixed inset-0 flex items-center justify-center hidden opacity-0 transition-opacity p-4">
        <div class="relative w-full h-full flex items-center justify-center">
            <!-- Close Button -->
            <button id="close-modal" class="absolute top-4 right-4 text-white text-3xl p-2 rounded-full bg-black/50 hover:bg-black/80 transition z-50">
                <i class="fas fa-times"></i>
            </button>

            <!-- Previous Button -->
            <button id="prev-button" class="absolute left-4 sm:left-8 text-white text-4xl p-2 rounded-full bg-black/50 hover:bg-black/80 transition z-40">
                <i class="fas fa-chevron-left"></i>
            </button>

            <!-- Modal Image (Now clickable to open original host link) -->
            <img id="modal-image" class="modal-content rounded-xl shadow-2xl max-h-full max-w-full" src="" alt="Full size image">
            
            <!-- Next Button -->
            <button id="next-button" class="absolute right-4 sm:right-8 text-white text-4xl p-2 rounded-full bg-black/50 hover:bg-black/80 transition z-40">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <script>
        // --- Photo Gallery Data ---
        const galleries = {
            "1st Half": [
                "https://i.postimg.cc/6p04XbWc/DSC-3806.jpg",
                "https://i.postimg.cc/RZRJBpST/DSC-3807.jpg",
                "https://i.postimg.cc/JzqHLYrc/DSC-3808.jpg",
                "https://i.postimg.cc/bw8S4fh9/DSC-3809.jpg"
            ],
            "2nd Half": [
                "https://i.postimg.cc/ZnRKqrr5/DSC-4010.jpg",
                "https://i.postimg.cc/pr6V5pZX/DSC-4011.jpg",
                "https://i.postimg.cc/1Xt5zppX/DSC-4012.jpg",
                "https://i.postimg.cc/rsPyRKJy/DSC-4013.jpg"
            ],
            "3rd Half": [
                "https://i.postimg.cc/25tPxj3H/DSC-4343.jpg",
                "https://i.postimg.cc/nrbg6d4k/DSC-4345.jpg",
                "https://i.postimg.cc/JhF9Q7t5/DSC-4347.jpg",
                "https://i.postimg.cc/g07fKcrq/DSC-4348.jpg",
                "https://i.postimg.cc/nLW61VCZ/DSC-4349.jpg"
            ],
            "Warmups - Team": [
                "https://i.postimg.cc/rF3TJ9bP/DSC-3767.jpg",
                "https://i.postimg.cc/gkQpDK54/DSC-3769.jpg",
                "https://i.postimg.cc/SN34rG5P/DSC-3777.jpg",
                "https://i.postimg.cc/qMSrLGYP/DSC-3778.jpg",
                "https://i.postimg.cc/k5Fd7P5L/DSC-3782.jpg"
            ],
            "Team Photos": [
                "https://i.postimg.cc/tCNzm5xf/DSC-3723.jpg",
                "https://i.postimg.cc/qMxGZL3L/DSC-3725.jpg",
                "https://i.postimg.cc/020CHfwt/DSC-3727.jpg",
                "https://i.postimg.cc/VLWFHRCV/DSC-3728.jpg",
                "https://i.postimg.cc/k5zNtY0X/DSC-3735.jpg"
            ]
        };

        // --- DOM Elements ---
        const galleryContainer = document.getElementById('gallery-container');
        const imageModal = document.getElementById('image-modal');
        const modalImage = document.getElementById('modal-image');
        const closeModalButton = document.getElementById('close-modal');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const navButtons = document.querySelectorAll('.nav-button');
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessage = document.getElementById('error-message');

        // --- State Variables ---
        let currentImageIndex = 0;
        let currentGalleryKey = null;
        let currentImages = [];

        // --- Modal Control Functions ---

        /** Shows the modal with the image at the given index in the current gallery. */
        function openModal(index) {
            currentImageIndex = index;
            modalImage.src = currentImages[currentImageIndex];
            imageModal.classList.remove('hidden');
            // Animate fade-in
            setTimeout(() => imageModal.classList.add('opacity-100'), 10);
            // Hide navigation buttons if there is only one image
            const isSingleImage = currentImages.length <= 1;
            prevButton.classList.toggle('hidden', isSingleImage);
            nextButton.classList.toggle('hidden', isSingleImage);
        }

        /** Closes the modal. */
        function closeModal() {
            imageModal.classList.remove('opacity-100');
            // Wait for fade-out animation before hiding completely
            setTimeout(() => imageModal.classList.add('hidden'), 300);
        }

        /** Navigates to the next image in the sequence. */
        function showNextImage() {
            if (currentImages.length === 0) return;
            currentImageIndex = (currentImageIndex + 1) % currentImages.length;
            modalImage.src = currentImages[currentImageIndex];
        }

        /** Navigates to the previous image in the sequence. */
        function showPrevImage() {
            if (currentImages.length === 0) return;
            currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
            modalImage.src = currentImages[currentImageIndex];
        }

        // --- Gallery Rendering Function ---

        /** Loads and displays images for the specified sub-gallery. */
        function loadSubGallery(galleryName) {
            currentGalleryKey = galleryName;
            currentImages = galleries[galleryName] || [];
            galleryContainer.innerHTML = ''; // Clear existing images
            loadingSpinner.classList.remove('hidden');
            errorMessage.classList.add('hidden');
            
            // Update active button state
            navButtons.forEach(button => {
                button.classList.remove('active');
                if (button.dataset.gallery === galleryName) {
                    button.classList.add('active');
                }
            });

            if (currentImages.length === 0) {
                loadingSpinner.classList.add('hidden');
                errorMessage.classList.remove('hidden');
                errorMessage.querySelector('p').textContent = `No photos available for "${galleryName}".`;
                return;
            }

            let loadedCount = 0;
            const fragment = document.createDocumentFragment();

            currentImages.forEach((url, index) => {
                const imgContainer = document.createElement('div');
                imgContainer.className = 'w-full aspect-video overflow-hidden rounded-lg shadow-xl bg-gray-800';

                const img = document.createElement('img');
                img.src = url;
                img.alt = `${galleryName} photo ${index + 1}`;
                img.className = 'gallery-image w-full h-full object-cover transition-all duration-300';
                img.loading = 'lazy'; // Improve initial load performance
                
                // Click listener to open modal
                img.addEventListener('click', () => openModal(index));

                // Image load handler (for hiding spinner)
                img.onload = () => {
                    loadedCount++;
                    if (loadedCount === currentImages.length) {
                        loadingSpinner.classList.add('hidden');
                    }
                };
                
                // Image error handler
                img.onerror = () => {
                    console.error(`Failed to load image: ${url}`);
                    // Optionally replace with a local placeholder if external URL fails
                    img.src = "https://placehold.co/400x225/333333/AAAAAA?text=Image+Error";
                };

                imgContainer.appendChild(img);
                fragment.appendChild(imgContainer);
            });

            // Append all images at once after a small delay to allow loading spinner to show
            setTimeout(() => {
                galleryContainer.appendChild(fragment);
                // If loadedCount is still 0 (e.g., all images error), hide spinner
                if (loadedCount === 0 && currentImages.length > 0) {
                     loadingSpinner.classList.add('hidden');
                }
            }, 50); 
        }

        // --- Event Listeners Setup ---

        closeModalButton.addEventListener('click', closeModal);
        prevButton.addEventListener('click', showPrevImage);
        nextButton.addEventListener('click', showNextImage);

        // *** FIX 1: Re-add click listener for desktop functionality ***
        modalImage.addEventListener('click', (e) => {
            // Check if the click event originated from a touch device (to avoid double-opening the link)
            // If the tap-detection logic below fires, it opens the link and should prevent the click.
            // But for a pure desktop click, this is necessary.
            e.stopPropagation(); 
            window.open(modalImage.src, '_blank');
        });
        // ***************************************************************

        // Close modal when clicking outside the image
        imageModal.addEventListener('click', (e) => {
            // Note: This check ensures clicking on the image inside the modal (modalImage) 
            // does NOT close the modal, only clicking the backdrop (imageModal) does.
            if (e.target === imageModal || e.target === closeModalButton) {
                closeModal();
            }
        });

        // Keyboard navigation for modal
        document.addEventListener('keydown', (e) => {
            if (imageModal.classList.contains('opacity-100')) {
                if (e.key === 'ArrowRight') {
                    showNextImage();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'Escape') {
                    closeModal();
                }
            }
        });

        // FIX 2: Swipe and Tap logic for modal image on touch devices (Kept for mobile)
        let touchStartX = 0;
        let touchEndX = 0;

        modalImage.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
        });

        modalImage.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].clientX;
            const swipeThreshold = 50; // Minimum distance for a swipe
            const touchDifference = touchEndX - touchStartX;

            if (Math.abs(touchDifference) < swipeThreshold) {
                // This is a TAP: Open the image host link in a new tab
                e.stopPropagation(); 
                window.open(modalImage.src, '_blank');
                
                // IMPORTANT: We stop the propagation AND return. The browser may still fire
                // a synthetic 'click' event, which is why we added the 'click' listener above.
                // However, by executing the action here on 'touchend' for a tap, we ensure
                // the user gets the desired result on mobile before any confusing 'click' ghost.
                // Since the 'click' listener now does the EXACT same thing, a double execution 
                // is harmless (it just tries to open the same link twice).
                return; 
            } else if (touchDifference < 0) {
                // Swipe left: Go to next image
                showNextImage();
            } else {
                // Swipe right: Go to previous image
                showPrevImage();
            }
        });
        // ***********************************************************************************

        // Initialize the gallery on page load
        document.addEventListener('DOMContentLoaded', () => {
            // Add click listeners to navigation buttons
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const galleryName = button.dataset.gallery;
                    loadSubGallery(galleryName); // Call loadSubGallery for internal navigation
                });
            });

            // Load the first sub-gallery by default when the page loads
            loadSubGallery("1st Half"); 
        });
    </script>
</body>
</html>
